<table class="table table-striped table-hover">
    <thead>
      <tr>
        <th (click)="onSort('id')">ID 
          <i class="bi" [ngClass]="{'bi-arrow-up': sortField === 'id' && sortDirection === 'asc', 'bi-arrow-down': sortField === 'id' && sortDirection === 'desc'}"></i>
        </th>
        <th (click)="onSort('titulo')">Título
          <i class="bi" [ngClass]="{'bi-arrow-up': sortField === 'titulo' && sortDirection === 'asc', 'bi-arrow-down': sortField === 'titulo' && sortDirection === 'desc'}"></i>
        </th>
        <th (click)="onSort('ISBN')">ISBN
          <i class="bi" [ngClass]="{'bi-arrow-up': sortField === 'ISBN' && sortDirection === 'asc', 'bi-arrow-down': sortField === 'ISBN' && sortDirection === 'desc'}"></i>
        </th>
        <th (click)="onSort('editorial')">Editorial
          <i class="bi" [ngClass]="{'bi-arrow-up': sortField === 'editorial' && sortDirection === 'asc', 'bi-arrow-down': sortField === 'editorial' && sortDirection === 'desc'}"></i>
        </th>
        <th (click)="onSort('anioPublicacion')">Año de Publicación
          <i class="bi" [ngClass]="{'bi-arrow-up': sortField === 'anioPublicacion' && sortDirection === 'asc', 'bi-arrow-down': sortField === 'anioPublicacion' && sortDirection === 'desc'}"></i>
        </th>
        <th (click)="onSort('genero')">Género
          <i class="bi" [ngClass]="{'bi-arrow-up': sortField === 'genero' && sortDirection === 'asc', 'bi-arrow-down': sortField === 'genero' && sortDirection === 'desc'}"></i>
        </th>
      </tr>
    </thead>
    <tbody>
      @for (libro of libros; track libro.id) {
        <tr>
          <td>{{ libro.id }}</td>
          <td>{{ libro.titulo }}</td>
          <td class="isbn-cell">{{ libro.isbn || 'No disponible' }}</td>
          <td>{{ libro.editorial }}</td>
          <td>{{ libro.anioPublicacion | date:'yyyy' }}</td>
          <td>{{ libro.genero }}</td>
        </tr>
      }
    </tbody>
  </table>

  <!-- Controles de paginación -->
  <div class="d-flex justify-content-between align-items-center mt-4 mb-4">
    <div class="text-muted">
      <span class="fw-semibold">{{ libros.length }}</span> de <span class="fw-semibold">{{ totalElements }}</span> registros
    </div>
    <nav aria-label="Navegación de páginas" class="d-flex justify-content-center">
      <ul class="pagination pagination-sm mb-0">
        <li class="page-item" [class.disabled]="currentPage === 0">
          <a class="page-link" (click)="onPageChange(0)" aria-label="Primera página">
            <span aria-hidden="true">&laquo;&laquo;</span>
          </a>
        </li>
        <li class="page-item" [class.disabled]="currentPage === 0">
          <a class="page-link" (click)="onPageChange(currentPage - 1)" aria-label="Anterior">
            <span aria-hidden="true">&laquo;</span>
          </a>
        </li>
        @for (page of pages; track page) {
          @if (page === currentPage - 1 || page === currentPage || page === currentPage + 1 || page === 0 || page === totalPages - 1) {
            <li class="page-item" [class.active]="currentPage === page">
              <a class="page-link" (click)="onPageChange(page)">{{ page + 1 }}</a>
            </li>
          } @else if (page === currentPage - 2 || page === currentPage + 2) {
            <li class="page-item disabled">
              <span class="page-link">...</span>
            </li>
          }
        }
        <li class="page-item" [class.disabled]="currentPage === totalPages - 1">
          <a class="page-link" (click)="onPageChange(currentPage + 1)" aria-label="Siguiente">
            <span aria-hidden="true">&raquo;</span>
          </a>
        </li>
        <li class="page-item" [class.disabled]="currentPage === totalPages - 1">
          <a class="page-link" (click)="onPageChange(totalPages - 1)" aria-label="Última página">
            <span aria-hidden="true">&raquo;&raquo;</span>
          </a>
        </li>
      </ul>
    </nav>
  </div>